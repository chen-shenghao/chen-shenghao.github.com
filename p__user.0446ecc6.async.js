"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[532],{7584:function(y,h,u){u.r(h);var I=u(15009),l=u.n(I),O=u(99289),c=u.n(O),P=u(5574),B=u.n(P),i=u(90194),f=u(66684),n=u(17141),p=u(92077),E=u.n(p),v=u(62435),t=u(61534),e=u(86074),A=function(){var x=n.l0.useForm(),M=B()(x,1),m=M[0],j=(0,t.useRequest)(i.Z.auth.currentUser,{cacheKey:"Services.auth.currentUser"}),r=j.data,C=j.run,g=(0,v.useCallback)(function(){n.u_.confirm({title:"\u66F4\u65B0\u4E2A\u4EBA\u4FE1\u606F",destroyOnClose:!1,forceRender:!0,content:(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(n.l0,{mode:"card",form:m,layout:"horizontal",children:[(0,e.jsx)(n.l0.Item,{noStyle:!0,name:"headImageArr",rules:[{required:!0,message:"\u8BF7\u4E0A\u4F20\u5934\u50CF"}],children:(0,e.jsx)(n.wA,{style:{justifyContent:"center",display:"flex"},upload:i.Z.utils.img,maxCount:1})}),(0,e.jsx)(n.l0.Item,{style:{"--prefix-width":"5em"},name:"name",label:"\u59D3\u540D",rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u59D3\u540D"}],children:(0,e.jsx)(n.II,{placeholder:"\u8BF7\u8F93\u5165\u59D3\u540D"})})]})}),confirmText:"\u786E\u8BA4",onConfirm:function(){var s=c()(l()().mark(function o(){var _;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.validateFields();case 2:return _=a.sent,a.next=5,i.Z.auth.updateUserInfo({name:_.name,headImage:_.headImageArr[0].url});case 5:n.FN.show({icon:"success",content:"\u63D0\u4EA4\u6210\u529F"}),C();case 7:case"end":return a.stop()}},o)}));function F(){return s.apply(this,arguments)}return F}()}),m.setFieldsValue({name:r==null?void 0:r.name,headImageArr:[{url:r==null?void 0:r.headImage}]})},[r==null?void 0:r.headImage,r==null?void 0:r.name,m,C]),b=(0,v.useCallback)(c()(l()().mark(function s(){return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:n.u_.confirm({title:"\u786E\u8BA4\u9000\u51FA\uFF1F",onConfirm:function(){var _=c()(l()().mark(function a(){return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.next=2,i.Z.auth.logout();case 2:localStorage.removeItem(f.z.TOKEN),t.history.replace(f.z.LOGIN_PAGE);case 4:case"end":return d.stop()}},a)}));function D(){return _.apply(this,arguments)}return D}()});case 1:case"end":return o.stop()}},s)})),[]);return(0,e.jsxs)("main",{className:"p-x p-y",children:[(0,e.jsx)(t.Helmet,{children:(0,e.jsx)("title",{children:"\u6211\u7684"})}),(0,e.jsxs)(n.Zb,{children:[(0,e.jsxs)(n.T,{align:"center",justify:"start",onClick:function(){g()},children:[(0,e.jsx)(n.qE,{style:{"--border-radius":"50%"},src:(r==null?void 0:r.headImage)||""}),(0,e.jsx)("div",{children:r==null?void 0:r.name})]}),(0,e.jsx)(n.iz,{}),(0,e.jsxs)(n.T,{className:"w-full",justify:"between",children:[(0,e.jsxs)("div",{children:["\u9500\u552E\u56DE\u6B3E\uFF1A",E()(r==null?void 0:r.sellAmount).format("0,00"),"\u5143"]}),(0,e.jsx)("div",{className:"text-gray",children:"|"}),(0,e.jsxs)("div",{children:["\u7F6E\u6362\u7F8A\u8089\uFF1A",E()(r==null?void 0:r.replaceSheepNum).format("0,00"),"\u65A4"]})]})]}),(0,e.jsxs)(n.aV,{mode:"card",style:{margin:0},className:"m-t",header:(0,e.jsx)(e.Fragment,{children:"\u517B\u6B96\u8BB0\u5F55"}),children:[(0,e.jsx)(n.aV.Item,{title:"\u8BA4\u517B\u8BB0\u5F55",arrow:!0,onClick:function(){return t.history.push("/foster")}}),(0,e.jsx)(n.aV.Item,{title:"\u51FA\u680F\u8BB0\u5F55",arrow:!0,onClick:function(){return t.history.push("/crop")}})]}),(0,e.jsxs)(n.aV,{mode:"card",style:{margin:0},className:"m-t",header:(0,e.jsx)(e.Fragment,{children:"\u8BBE\u7F6E"}),children:[(0,e.jsx)(n.aV.Item,{title:"\u4FEE\u6539\u5BC6\u7801",arrow:!0,onClick:function(){return t.history.push("/reset")}}),(0,e.jsx)(n.aV.Item,{title:"\u9000\u51FA\u767B\u5F55",arrow:!0,onClick:function(){return b()}})]})]})};h.default=A}}]);
